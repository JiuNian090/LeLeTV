# 播放功能设计

## 1. 功能概述
实现LeLeTV的视频播放功能，包括视频播放控制、多集内容播放、上下集切换、播放进度保存与恢复、自动连播等功能。

## 2. 功能设计

### 2.1 视频播放控制
- 集成ArtPlayer播放器实现视频播放
- 支持播放/暂停、快进/快退、音量控制等基本操作
- 支持全屏播放和画中画模式
- 支持键盘快捷键操作

### 2.2 多集内容播放
- 支持电视剧、动漫等多集内容播放
- 提供集数列表展示所有可播放集数
- 支持点击集数切换播放

### 2.3 上下集切换
- 提供上一集/下一集按钮
- 支持键盘快捷键切换集数
- 自动检测当前集数位置

### 2.4 播放进度保存与恢复
- 自动保存播放进度到localStorage
- 页面刷新或重新访问时恢复播放进度
- 支持手动清除播放进度

### 2.5 自动连播功能
- 提供自动连播开关
- 支持自动播放下一集
- 可配置自动连播默认状态

## 3. 技术实现

### 3.1 播放器集成
- 使用ArtPlayer作为核心播放器
- 集成HLS.js支持M3U8流媒体播放
- 自定义播放器样式和控制栏

### 3.2 进度管理
- 使用localStorage存储播放进度
- 定期保存播放进度（每30秒）
- 页面卸载时保存最终进度

### 3.3 集数管理
- 解析视频详情获取集数列表
- 支持集数排序（正序/倒序）
- 高亮显示当前播放集数

### 3.4 用户交互
- 提供直观的播放控制界面
- 支持触摸设备操作
- 提供播放状态反馈

## 4. UI设计

### 4.1 播放器区域
- 视频播放区域占据页面主要空间
- 自适应不同屏幕尺寸
- 支持响应式设计

### 4.2 控制栏设计
- 集成播放控制按钮
- 显示播放进度条
- 提供音量控制
- 显示当前播放时间

### 4.3 集数导航
- 上下集切换按钮
- 当前集数信息显示
- 集数列表网格展示

### 4.4 功能按钮
- 自动连播开关
- 集数排序切换
- 链接复制功能
- 控制栏锁定

## 5. 交互设计

### 5.1 播放控制
- 点击播放器区域切换播放/暂停
- 拖拽进度条跳转播放位置
- 滚轮调节音量

### 5.2 集数切换
- 点击集数按钮切换到对应集数
- 点击上下集按钮切换集数
- 键盘快捷键切换集数

### 5.3 功能设置
- 切换自动连播开关
- 切换集数排序方式
- 复制播放链接
- 锁定/解锁控制栏

## 6. 性能优化

### 6.1 播放性能
- 使用HLS.js优化流媒体加载
- 实现缓冲区管理
- 支持自适应码率

### 6.2 进度保存
- 节流保存播放进度
- 批量更新历史记录
- 异步保存避免阻塞

### 6.3 响应速度
- 预加载下一集信息
- 缓存常用数据
- 优化DOM操作